{% extends 'base.html' %}

{% block content %}


        <h2 class="text-center mb-5">游늵 Graficos de Asistencias</h2>

        <!-- Gr치fico 1: Asistencias por Mes -->
        <div class="card mb-4">
            <div class="card-body-full bg-dark text-light">
                <h4 class="text-center mb-3">Asistencias por Mes ({{ now|date:"Y" }})</h4>
                <canvas id="graficoMes"></canvas>
            </div>
        </div>

        <!-- Gr치fico 2: Asistencias por D칤a de la Semana -->
        <div class="card mb-4">
            <div class="card-body-full bg-dark text-light">
                <h4 class="text-center mb-3">Asistencias por D칤a de la Semana</h4>
                <canvas id="graficoDia"></canvas>
            </div>
        </div>

        <!-- Gr치fico 3: Asistencias por Hora -->
        <div class="card mb-4">
            <div class="card-body-full bg-dark text-light">
                <h4 class="text-center mb-3">Asistencias por Hora del D칤a</h4>
                <canvas id="graficoHora"></canvas>
            </div>
        </div>


    <script>
        // Gr치fico 1: Asistencias por mes
        const ctxMes = document.getElementById('graficoMes').getContext('2d');
        new Chart(ctxMes, {
            type: 'bar',
            data: {
                labels: {{ meses|safe }},
                datasets: [{
                    label: 'Cantidad de asistencias',
                    data: {{ totales_mes|safe }},
                    backgroundColor: 'rgba(54, 162, 235, 0.6)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: { y: { beginAtZero: true } },
                responsive: true
            }
        });

        // Gr치fico 2: Asistencias por d칤a de la semana
        const ctxDia = document.getElementById('graficoDia').getContext('2d');
        new Chart(ctxDia, {
            type: 'pie',
            data: {
                labels: {{ dias_semana_labels|safe }},
                datasets: [{
                    label: 'Asistencias',
                    data: {{ totales_dia|safe }},
                    backgroundColor: [
                        '#007bff', '#28a745', '#ffc107', '#dc3545',
                        '#17a2b8', '#6610f2', '#fd7e14'
                    ]
                }]
            },
            options: {
                responsive: true
            }
        });

        // Gr치fico 3: Asistencias por hora
        const ctxHora = document.getElementById('graficoHora').getContext('2d');
        new Chart(ctxHora, {
            type: 'line',
            data: {
                labels: {{ horas|safe }},
                datasets: [{
                    label: 'Asistencias',
                    data: {{ totales_hora|safe }},
                    borderColor: 'rgba(255, 99, 132, 1)',
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    fill: true,
                    tension: 0.3
                }]
            },
            options: {
                scales: { y: { beginAtZero: true } },
                responsive: true
            }
        });
    </script>


{% endblock %}
