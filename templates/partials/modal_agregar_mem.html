{% load static %}
<!-- Modal Inscripción -->
<div class="modal fade" id="modalInscripcion" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content bg-dark text-light">
      <div class="modal-header border-bordo">
        <h5 class="modal-title text-primary">Inscribir Cliente</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <form id="formInscripcion" method="post" action="{% url 'membresias:membresias_inscribir' %}">
        {% csrf_token %}
        <div class="modal-body">
          {{ form.non_field_errors }}
          <div class="row g-3">
            <div class="col-md-6">{{ form.nombre.label_tag }} {{ form.nombre }} </div>
            <div class="col-md-6">{{ form.apellido.label_tag }} {{ form.apellido }}</div>
            <div class="col-md-6">{{ form.dni.label_tag }} {{ form.dni }}</div>
            <div class="col-md-6">{{ form.metodo_pago.label_tag }} {{ form.metodo_pago }}</div>
            <div class="col-md-6">{{ form.telefono.label_tag }} {{ form.telefono }}</div>
            <div class="col-md-6">{{ form.emergencia.label_tag }} {{ form.emergencia }}</div>
            <div class="col-md-6">{{ form.domicilio.label_tag }} {{ form.domicilio }}</div>
            <div class="col-md-6">{{ form.email.label_tag }} {{ form.email }}</div>
            <div class="col-md-6 bg-transparent">{{ form.servicio.label_tag }} {{ form.servicio }}</div>
            <div class="col-12">{{ form.observaciones.label_tag }} {{ form.observaciones }}</div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success" id="btnPagar">
            Guardar
          </button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Confirmar Pago -->
<!-- Modal Efectivo -->
<div class="modal fade" id="modalEfectivo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-dark text-light">
      <div class="modal-header border-bordo">
        <h5 class="modal-title">Confirmar Pago en Efectivo</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        ¿Se recibió el pago en efectivo?
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-success" form="formInscripcion">Sí, confirmar</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No se realizó</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Transferencia -->
<div class="modal fade" id="modalTransferencia" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-dark text-light">
      <div class="modal-header border-bordo">
        <h5 class="modal-title">Pago por Transferencia</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body text-center">
        <p>Escanee el QR o use el alias:</p>
        <img src="{% static 'img/standard_qr-kode.webp' %}" alt="QR Transferencia" class="img-fluid mb-3">
        <p><strong>Alias:</strong> gimnasio.atleticx</p>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-success" form="formInscripcion">Confirmar Pago</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
      </div>
    </div>
  </div>
</div>
 

<script>
document.getElementById("btnPagar").addEventListener("click", function() {
  const metodo = document.getElementById("id_metodo_pago").value;
  if (metodo) {
    const texto = document.getElementById("id_metodo_pago").options[document.getElementById("id_metodo_pago").selectedIndex].text;
    if (texto.toLowerCase().includes("efectivo")) {
      new bootstrap.Modal(document.getElementById("modalEfectivo")).show();
    } else {
      new bootstrap.Modal(document.getElementById("modalTransferencia")).show();
    }
  }
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>